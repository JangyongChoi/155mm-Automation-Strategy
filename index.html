<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K9A2 탄약 보급 완전 자동화 전략 (ALRS)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #F5F5F2; /* Warm Neutral Background */
            color: #2D3748;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #E2E8F0;
        }
        ::-webkit-scrollbar-thumb {
            background: #A0AEC0;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #718096;
        }

        .tab-active {
            border-bottom: 2px solid #D69E2E; /* Military Gold */
            color: #1A202C;
            font-weight: 700;
        }

        .tab-inactive {
            color: #718096;
        }

        .node-box {
            transition: all 0.3s ease;
        }
        .node-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .timeline-point {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .timeline-point:hover {
            transform: scale(1.2);
        }
        .timeline-point.active {
            background-color: #D69E2E;
            border-color: #744210;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Header Section -->
    <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center">
                <span class="text-2xl mr-2">🛡️</span>
                <h1 class="text-xl font-bold text-gray-800 tracking-tight">K9A2 탄약 보급 완전 자동화 (ALRS)</h1>
            </div>
            <nav class="hidden md:flex space-x-6 text-sm font-medium text-gray-500">
                <a href="#context" class="hover:text-gray-900 transition">현황 및 문제</a>
                <a href="#architecture" class="hover:text-gray-900 transition">아키텍처</a>
                <a href="#roadmap" class="hover:text-gray-900 transition">로드맵</a>
                <a href="#requirements" class="hover:text-gray-900 transition">구축요소</a>
            </nav>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">

        <!-- Intro / The Last Mile Problem -->
        <section id="context" class="bg-white rounded-lg shadow-sm p-6 md:p-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 border-l-4 border-yellow-600 pl-4">The Last Mile: 병목현상의 해결</h2>
                    <p class="text-gray-600 mb-4 leading-relaxed">
                        K9A2 포탑의 내부 자동화에도 불구하고, 탄약고에서 포탑까지의 **'Last Mile'** 구간은 여전히 수동 작업에 의존하고 있습니다. 
                        이는 전체 사격 속도 저하와 병사의 피로도 증가, 생존성 위협으로 이어집니다.
                        본 시스템은 <span class="font-bold text-yellow-700">"생존성을 위한 분산"</span>과 <span class="font-bold text-yellow-700">"인력 감소를 상쇄하는 자동화"</span>를 목표로 합니다.
                    </p>
                    <div class="flex space-x-4 mt-6">
                        <div class="bg-gray-50 p-4 rounded-lg flex-1 text-center border border-gray-100">
                            <div class="text-3xl font-bold text-red-500 mb-1">Manual</div>
                            <div class="text-xs text-gray-500 uppercase tracking-wide">현재 방식 (병목)</div>
                        </div>
                        <div class="text-2xl flex items-center text-gray-300">➜</div>
                        <div class="bg-gray-50 p-4 rounded-lg flex-1 text-center border border-gray-100">
                            <div class="text-3xl font-bold text-green-600 mb-1">Auto</div>
                            <div class="text-xs text-gray-500 uppercase tracking-wide">미래 (ALRS)</div>
                        </div>
                    </div>
                </div>
                
                <!-- Chart: Efficiency Projection -->
                <div class="flex flex-col items-center">
                    <h3 class="text-sm font-semibold text-gray-500 mb-2">자동화 단계별 효율성 예측</h3>
                    <div class="chart-container">
                        <canvas id="efficiencyChart"></canvas>
                    </div>
                    <p class="text-xs text-gray-400 mt-2 text-center">단계별 인력 소요 감소 및 처리 속도 향상 추이</p>
                </div>
            </div>
        </section>

        <!-- Global Trends & Analysis -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Col 1: US & Germany -->
            <div class="bg-white p-6 rounded-lg shadow-sm border-t-4 border-blue-500">
                <h3 class="text-lg font-bold mb-3 flex items-center">
                    <span class="mr-2">🌍</span> 해외 기술 동향
                </h3>
                <div class="space-y-4">
                    <div class="p-3 bg-blue-50 rounded cursor-pointer hover:bg-blue-100 transition group" onclick="updateDetail('us')">
                        <div class="font-semibold text-blue-800">🇺🇸 미국 ERCA</div>
                        <p class="text-sm text-gray-600 mt-1">로봇 팔을 활용한 탄약고 관리 및 장약 자동 장전 연구.</p>
                        <p class="text-xs text-blue-400 mt-1 opacity-0 group-hover:opacity-100 transition italic">클릭하여 상세 정보 확인</p>
                    </div>
                    <div class="p-3 bg-blue-50 rounded cursor-pointer hover:bg-blue-100 transition group" onclick="updateDetail('germany')">
                        <div class="font-semibold text-blue-800">🇩🇪 독일 RCH 155</div>
                        <p class="text-sm text-gray-600 mt-1">무인 포탑 및 재보급 차량 인터페이스 최적화.</p>
                        <p class="text-xs text-blue-400 mt-1 opacity-0 group-hover:opacity-100 transition italic">클릭하여 상세 정보 확인</p>
                    </div>
                </div>
            </div>

            <!-- Col 2: Domestic Status -->
            <div class="bg-white p-6 rounded-lg shadow-sm border-t-4 border-green-500">
                <h3 class="text-lg font-bold mb-3 flex items-center">
                    <span class="mr-2">🇰🇷</span> 국내 기술 현황
                </h3>
                <div class="p-3 bg-green-50 rounded h-full">
                    <div class="font-semibold text-green-800 mb-2">K10 탄약운반장갑차</div>
                    <ul class="text-sm text-gray-600 space-y-2 list-disc list-inside">
                        <li>탄두 이송 자동화 완료</li>
                        <li class="text-red-500 font-medium">전처리 작업 수동 의존 (한계)</li>
                        <li class="text-xs text-gray-500 ml-4">- 신관 결합, 들개고리 제거, 장약 개봉</li>
                    </ul>
                </div>
            </div>

            <!-- Col 3: Tech Trends -->
            <div class="bg-white p-6 rounded-lg shadow-sm border-t-4 border-purple-500">
                <h3 class="text-lg font-bold mb-3 flex items-center">
                    <span class="mr-2">⚡</span> 핵심 기술 트렌드
                </h3>
                <div class="grid grid-cols-2 gap-2">
                    <div class="bg-purple-50 p-2 rounded text-center">
                        <div class="text-xl">🤖</div>
                        <div class="text-xs font-bold text-purple-800 mt-1">AGV/AMR</div>
                    </div>
                    <div class="bg-purple-50 p-2 rounded text-center">
                        <div class="text-xl">🦾</div>
                        <div class="text-xs font-bold text-purple-800 mt-1">협동 로봇</div>
                    </div>
                    <div class="bg-purple-50 p-2 rounded text-center">
                        <div class="text-xl">👁️</div>
                        <div class="text-xs font-bold text-purple-800 mt-1">비전 센서</div>
                    </div>
                    <div class="bg-purple-50 p-2 rounded text-center">
                        <div class="text-xl">🏭</div>
                        <div class="text-xs font-bold text-purple-800 mt-1">Smart Factory</div>
                    </div>
                </div>
                <p class="text-xs text-gray-500 mt-3 text-center">민간 물류 기술의 국방 전용화 단계 진입</p>
            </div>
        </section>

        <!-- Operational Architecture Diagram (Interactive) -->
        <section id="architecture" class="bg-white rounded-lg shadow-sm p-6 md:p-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-2 border-l-4 border-yellow-600 pl-4">실행 가능한 아키텍처 (Operational Architecture)</h2>
            <p class="text-gray-600 mb-8">
                **'Smart Magazine to Automated Breech'** 구현을 위한 3단계 노드 구조입니다. 각 노드를 클릭하여 세부 기능을 확인하세요.
            </p>

            <div class="flex flex-col md:flex-row items-stretch justify-between gap-4 mb-6 relative">
                <!-- Node 1 -->
                <button onclick="showArchDetail('magazine')" class="node-box flex-1 bg-gray-50 border-2 border-gray-200 rounded-xl p-6 text-left hover:border-yellow-500 hover:bg-yellow-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 relative group">
                    <div class="absolute top-4 right-4 text-2xl opacity-20 group-hover:opacity-100 transition">🏭</div>
                    <h3 class="font-bold text-lg text-gray-800 mb-2">1. Smart Magazine Node</h3>
                    <p class="text-sm text-gray-500">스마트 탄약고 & 전처리</p>
                </button>
                
                <!-- Arrow -->
                <div class="hidden md:flex items-center justify-center text-gray-300">
                    <span class="text-4xl">➜</span>
                </div>

                <!-- Node 2 -->
                <button onclick="showArchDetail('transfer')" class="node-box flex-1 bg-gray-50 border-2 border-gray-200 rounded-xl p-6 text-left hover:border-yellow-500 hover:bg-yellow-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 relative group">
                    <div class="absolute top-4 right-4 text-2xl opacity-20 group-hover:opacity-100 transition">🚛</div>
                    <h3 class="font-bold text-lg text-gray-800 mb-2">2. Transfer Node</h3>
                    <p class="text-sm text-gray-500">자율 이송 (AMR/AGV)</p>
                </button>

                <!-- Arrow -->
                <div class="hidden md:flex items-center justify-center text-gray-300">
                    <span class="text-4xl">➜</span>
                </div>

                <!-- Node 3 -->
                <button onclick="showArchDetail('loading')" class="node-box flex-1 bg-gray-50 border-2 border-gray-200 rounded-xl p-6 text-left hover:border-yellow-500 hover:bg-yellow-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 relative group">
                    <div class="absolute top-4 right-4 text-2xl opacity-20 group-hover:opacity-100 transition">💥</div>
                    <h3 class="font-bold text-lg text-gray-800 mb-2">3. Loading Node</h3>
                    <p class="text-sm text-gray-500">자동 투입 (K9A2/K10)</p>
                </button>
            </div>

            <!-- Detail Display Area -->
            <div id="arch-detail-panel" class="bg-gray-800 text-white rounded-lg p-6 transition-all duration-300">
                <div class="flex items-start">
                    <div class="mr-4 text-3xl" id="arch-icon">ℹ️</div>
                    <div class="w-full">
                        <h4 class="text-xl font-bold text-yellow-400 mb-2" id="arch-title">아키텍처 세부 정보</h4>
                        <p class="text-gray-300 leading-relaxed" id="arch-desc">
                            위의 다이어그램에서 각 노드를 선택하여 세부 작동 방식을 확인하십시오. 이 시스템은 탄약고에서의 준비부터 포탑 장전까지 완전한 무인화 흐름을 생성합니다.
                        </p>
                        <ul id="arch-list" class="mt-4 space-y-2 text-sm text-gray-400 list-disc list-inside hidden">
                            <!-- Dynamic list items -->
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Roadmap Interactive Timeline -->
        <section id="roadmap" class="bg-white rounded-lg shadow-sm p-6 md:p-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-yellow-600 pl-4">연도별 구축 로드맵 (2024-2035)</h2>
            
            <!-- Timeline Controls -->
            <div class="relative mb-12 px-4">
                <div class="absolute top-1/2 left-0 w-full h-1 bg-gray-200 -z-0"></div>
                <div class="flex justify-between items-center relative z-10">
                    <!-- Phase 1 -->
                    <div onclick="setPhase(1)" class="flex flex-col items-center group cursor-pointer">
                        <div id="point-1" class="timeline-point w-6 h-6 rounded-full bg-white border-4 border-yellow-500 mb-2 active"></div>
                        <div class="text-sm font-bold text-gray-800">1단계</div>
                        <div class="text-xs text-gray-500">~2028 (도입)</div>
                    </div>
                    <!-- Phase 2 -->
                    <div onclick="setPhase(2)" class="flex flex-col items-center group cursor-pointer">
                        <div id="point-2" class="timeline-point w-6 h-6 rounded-full bg-white border-4 border-gray-300 mb-2 group-hover:border-yellow-400"></div>
                        <div class="text-sm font-bold text-gray-800">2단계</div>
                        <div class="text-xs text-gray-500">~2032 (고도화)</div>
                    </div>
                    <!-- Phase 3 -->
                    <div onclick="setPhase(3)" class="flex flex-col items-center group cursor-pointer">
                        <div id="point-3" class="timeline-point w-6 h-6 rounded-full bg-white border-4 border-gray-300 mb-2 group-hover:border-yellow-400"></div>
                        <div class="text-sm font-bold text-gray-800">3단계</div>
                        <div class="text-xs text-gray-500">2035 (완전 자동화)</div>
                    </div>
                </div>
            </div>

            <!-- Dynamic Content for Roadmap -->
            <div class="bg-yellow-50 rounded-xl p-6 border border-yellow-100 grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-bold text-gray-800 mb-2 flex items-center">
                        <span id="phase-title" class="mr-2">🚀 1단계: 도입 및 보완</span>
                        <span id="phase-trl" class="text-xs bg-gray-800 text-white px-2 py-1 rounded">TRL 6-7</span>
                    </h3>
                    <p id="phase-desc" class="text-gray-700 mb-4 text-sm leading-relaxed">
                        상용 웨어러블 로봇 도입으로 도수 운반 피로도를 감소시키고, 전동식 신관 결합기를 보급하여 수동 작업을 보조합니다.
                    </p>
                    
                    <div class="bg-white p-4 rounded border border-gray-200">
                        <h4 class="text-xs font-bold text-gray-500 uppercase mb-2">주요 기술 & 장비</h4>
                        <div id="phase-tags" class="flex flex-wrap gap-2">
                            <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded font-medium">웨어러블 로봇</span>
                            <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded font-medium">전동 신관 결합기</span>
                            <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded font-medium">고중량 AGV 시범</span>
                        </div>
                    </div>
                </div>
                
                <div class="flex flex-col justify-center">
                    <h4 class="text-sm font-bold text-gray-600 mb-2">전력화 목표 시각화</h4>
                    <!-- Dynamic Progress Bar -->
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between text-xs mb-1">
                                <span>자동화 수준</span>
                                <span id="prog-auto">30%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="bar-auto" class="bg-yellow-500 h-2 rounded-full transition-all duration-500" style="width: 30%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs mb-1">
                                <span>인력 개입</span>
                                <span id="prog-human">70%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="bar-human" class="bg-blue-500 h-2 rounded-full transition-all duration-500" style="width: 70%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-white rounded border border-yellow-200 text-xs text-gray-600 italic">
                        "병사의 근골격계 부담 50% 이상 경감 목표"
                    </div>
                </div>
            </div>
        </section>

        <!-- Requirements Matrix -->
        <section id="requirements" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-yellow-600 pl-4">전력 구축을 위한 4대 핵심 요소 (DOTMLPF)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                
                <!-- H/W -->
                <div class="bg-white p-5 rounded-lg shadow-sm hover:shadow-md transition border-t-4 border-red-500">
                    <div class="text-3xl mb-3">🛠️</div>
                    <h3 class="font-bold text-gray-800 mb-2">H/W (장비)</h3>
                    <ul class="text-sm text-gray-600 space-y-2">
                        <li>• 고하중 탄두 운반 AMR</li>
                        <li>• 신관 자동 결합 모듈</li>
                        <li>• 장약 통 개봉 로봇</li>
                    </ul>
                </div>

                <!-- S/W -->
                <div class="bg-white p-5 rounded-lg shadow-sm hover:shadow-md transition border-t-4 border-blue-500">
                    <div class="text-3xl mb-3">💻</div>
                    <h3 class="font-bold text-gray-800 mb-2">S/W (제어)</h3>
                    <ul class="text-sm text-gray-600 space-y-2">
                        <li>• 실시간 재고 공유</li>
                        <li>• C4I 연동 네트워크</li>
                        <li>• K9A2-K10-AMR 통합</li>
                    </ul>
                </div>

                <!-- Infra -->
                <div class="bg-white p-5 rounded-lg shadow-sm hover:shadow-md transition border-t-4 border-green-500">
                    <div class="text-3xl mb-3">🏗️</div>
                    <h3 class="font-bold text-gray-800 mb-2">Infrastructure</h3>
                    <ul class="text-sm text-gray-600 space-y-2">
                        <li>• 스마트 포상 탄약고</li>
                        <li>• 평탄화 (로봇 이동용)</li>
                        <li>• 통신 환경 구축</li>
                    </ul>
                </div>

                <!-- Personnel -->
                <div class="bg-white p-5 rounded-lg shadow-sm hover:shadow-md transition border-t-4 border-purple-500">
                    <div class="text-3xl mb-3">👥</div>
                    <h3 class="font-bold text-gray-800 mb-2">Personnel</h3>
                    <ul class="text-sm text-gray-600 space-y-2">
                        <li>• 소수 정예 운용 인력</li>
                        <li>• 정비 및 관리 중심</li>
                        <li>• 단순 노무 인원 감축</li>
                    </ul>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-gray-400 py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2 font-medium text-white">국방전력구축 아키텍처 생성기</p>
            <p class="text-sm">Based on RAND & CSIS Analysis | 2024-2035 ALRS Roadmap</p>
            <div class="mt-4 text-xs text-gray-500">
                제안된 아키텍처는 K9A2/A3 발전 방향에 따른 시뮬레이션 모델입니다.
            </div>
        </div>
    </footer>

    <!-- Chosen Palette: Warm Neutrals with Military Accents (#F5F5F2, #D69E2E, #2D3748) -->
    <!-- Application Structure Plan: 
         1. Context Section: Sets the stage (The Last Mile Problem) with a comparison chart.
         2. Global Context: Tabs for situational awareness (US/Germany/Korea).
         3. Architecture: Interactive Process Flow (Magazine -> Transfer -> Loading) to visualize the solution logic.
         4. Roadmap: Interactive Timeline to show the evolution over time (2028->2035).
         5. Requirements: Card grid for quick scanning of DOTMLPF elements.
         Designed to move from "Why" -> "How" -> "When" -> "What". 
    -->
    <!-- Visualization & Content Choices:
         1. Efficiency Chart: Bar chart to visually prove the ROI of automation.
         2. Process Nodes: HTML/CSS Interactive Diagram instead of static image to allow drilling down into details (Magazine vs Loading logic).
         3. Timeline Control: Gamified slider to make the roadmap engaging.
         4. NO SVG/Mermaid: Used CSS shapes and Flexbox for diagrams.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <script>
        // --- DATA STORE ---
        const roadmapData = {
            1: {
                title: "1단계: 도입 및 보완 (~2028)",
                trl: "TRL 6-7 (상용기술 적용)",
                desc: "웨어러블 로봇 도입으로 도수 운반 피로도를 감소시키고, 전동식 신관 결합기를 보급하여 수동 작업을 보조합니다. 고중량 AGV 시범 운용을 시작합니다.",
                tags: ["웨어러블 로봇(Exoskeleton)", "전동 신관 결합기", "고중량 AGV 시범", "K10 부분 개조"],
                auto: 30,
                human: 70,
                quote: "병사의 근골격계 부담 50% 이상 경감 목표"
            },
            2: {
                title: "2단계: 고도화 및 통합 (~2032)",
                trl: "TRL 8 (국방 전용 개발)",
                desc: "전술 지형 극복이 가능한 궤도형 AMR을 도입합니다. 탄약고와 포 간의 자율 이송 시스템을 구축하고, 비전 인식 기반 협동 로봇이 신관 정밀 결합을 수행합니다.",
                tags: ["궤도형 AMR", "비전 인식 협동 로봇", "K9A2-K10 MUM-T", "자동 신관 결합"],
                auto: 70,
                human: 30,
                quote: "K9A2-K10-AMR 간 유무인 복합 데이터 링크 통합"
            },
            3: {
                title: "3단계: 완전 자동화 (2035)",
                trl: "TRL 9 (야전 배치)",
                desc: "탄약 보급-장전-사격 전 과정이 AI 지휘통제 하에 이루어집니다. 탄약고 내 'Robot Cell'이 완결된 탄약을 준비하며, 무인 탄약운반로봇이 완전 자율 이송합니다.",
                tags: ["Human-out-of-the-loop", "AI 지휘통제", "Robot Cell 완결체계", "완전 무인화"],
                auto: 95,
                human: 5,
                quote: "인간 개입이 필요 없는 로봇 기반 탄약 처리 시스템"
            }
        };

        const archData = {
            magazine: {
                title: "1. Smart Magazine Node (스마트 탄약고)",
                icon: "🏭",
                desc: "탄약고 내부는 'Robot Cell'로 기능합니다. 로봇 팔이 보관된 탄두의 들개고리를 제거하고, 사격 제원에 맞는 신관을 자동으로 결합합니다. 장약통 또한 자동 개봉되어 로봇에 의해 분류됩니다.",
                list: [
                    "로봇 팔: 들개고리 제거 & 신관 결합",
                    "장약통 자동 개봉 및 분류",
                    "인프라: 로봇 이동 평탄화 및 통신망"
                ]
            },
            transfer: {
                title: "2. Transfer Node (자율 이송)",
                icon: "🚛",
                desc: "준비된 탄두와 장약은 궤도형 AMR(자율이동로봇)이 수령합니다. GPS와 LiDAR 센서를 활용해 전술 지형과 장애물을 회피하며 K9A2 또는 K10의 위치까지 최적 경로로 이송합니다.",
                list: [
                    "궤도형 AMR: 험지 돌파 능력",
                    "LiDAR/GPS: 장애물 회피",
                    "실시간 위치 공유 (C4I 연동)"
                ]
            },
            loading: {
                title: "3. Loading Node (자동 투입)",
                icon: "💥",
                desc: "AMR이 포탑 후방에 접근하면, K9A2의 '자동 수용 셔틀'이 탄약과 장약을 직접 전달받습니다. 내부 매거진으로의 적재 과정은 완전히 자동화되며, 승무원은 시스템 상태만 모니터링합니다.",
                list: [
                    "자동 수용 셔틀: AMR 도킹",
                    "Human-out-of-the-loop: 인원 개입 최소화",
                    "내부 매거진 자동 적재"
                ]
            }
        };

        const caseStudyData = {
            us: {
                title: "미국 ERCA (Extended Range Cannon Artillery) 사례",
                icon: "🇺🇸",
                desc: "미 육군의 사거리 연장 포병 프로젝트로, 단순히 사거리를 늘리는 것뿐 아니라 장전 속도 향상을 위해 로봇 기반 자동화 시스템을 핵심적으로 연구 중입니다.",
                list: [
                    "로봇 팔 기반 탄약고 관리 시스템: 탄두와 장약을 기계적으로 분류 및 정렬",
                    "자동 장약 장전 장치: 다양한 사거리 대응을 위한 가변적 장약 조합 자동화",
                    "탄약 데이터 정보화: RFID 및 센서를 통한 실시간 탄약 상태 모니터링"
                ]
            },
            germany: {
                title: "독일 RCH 155 (Remote Controlled Howitzer) 사례",
                icon: "🇩🇪",
                desc: "독일 KNDS의 무인 포탑 자주포 시스템으로, 세계 최초로 기동 중 사격(Shoot-on-the-move)이 가능한 고도의 자동화 기술을 보유하고 있습니다.",
                list: [
                    "완전 무인 포탑: 승무원은 차체 내부에서 안전하게 사격 통제",
                    "재보급 인터페이스 최적화: 외부 재보급 차량과의 물리적 연동 인터페이스 설계",
                    "모듈형 장약 시스템: 자동 장전에 최적화된 고정형/가변형 장약 처리 시스템"
                ]
            }
        };

        // --- CHART JS SETUP ---
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('efficiencyChart').getContext('2d');
            
            // Chart Configuration
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['현재 (Manual)', '1단계 (2028)', '3단계 (2035)'],
                    datasets: [
                        {
                            label: '탄약 처리 속도 (Speed)',
                            data: [30, 60, 95],
                            backgroundColor: '#D69E2E', // Military Gold
                            borderColor: '#B7791F',
                            borderWidth: 1
                        },
                        {
                            label: '필요 인력 (Personnel)',
                            data: [100, 70, 20],
                            backgroundColor: '#2D3748', // Dark Slate
                            borderColor: '#1A202C',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) { return value + '%' }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw + ' (Index)';
                                }
                            }
                        },
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        });

        // --- INTERACTIVITY LOGIC ---

        // 1. Roadmap Interaction
        function setPhase(phaseId) {
            // Update Visuals for Timeline Points
            for(let i=1; i<=3; i++) {
                const point = document.getElementById(`point-${i}`);
                if(i === phaseId) {
                    point.classList.remove('border-gray-300');
                    point.classList.add('bg-white', 'border-yellow-500', 'active');
                } else {
                    point.classList.remove('bg-white', 'border-yellow-500', 'active');
                    point.classList.add('border-gray-300');
                }
            }

            // Update Content
            const data = roadmapData[phaseId];
            document.getElementById('phase-title').innerText = phaseId === 1 ? "🚀 " + data.title : phaseId === 2 ? "⚙️ " + data.title : "🤖 " + data.title;
            document.getElementById('phase-trl').innerText = data.trl;
            document.getElementById('phase-desc').innerText = data.desc;
            
            // Update Tags
            const tagsContainer = document.getElementById('phase-tags');
            tagsContainer.innerHTML = '';
            data.tags.forEach(tag => {
                const span = document.createElement('span');
                span.className = "px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded font-medium animate-fade-in";
                span.innerText = tag;
                tagsContainer.appendChild(span);
            });

            // Update Bars
            document.getElementById('bar-auto').style.width = data.auto + '%';
            document.getElementById('prog-auto').innerText = data.auto + '%';
            document.getElementById('bar-human').style.width = data.human + '%';
            document.getElementById('prog-human').innerText = data.human + '%';
        }

        // 2. Architecture Interaction
        function showArchDetail(nodeKey) {
            const data = archData[nodeKey];
            updatePanelUI(data);
        }

        // 3. Global Trends Interaction (Fix for ReferenceError)
        function updateDetail(key) {
            const data = caseStudyData[key];
            if (data) {
                updatePanelUI(data);
                // Scroll to panel for better UX
                document.getElementById('architecture').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Helper to update the common detail panel
        function updatePanelUI(data) {
            const panel = document.getElementById('arch-detail-panel');
            const list = document.getElementById('arch-list');
            
            // Visual feedback animation
            panel.classList.add('opacity-50');
            
            setTimeout(() => {
                document.getElementById('arch-icon').innerText = data.icon;
                document.getElementById('arch-title').innerText = data.title;
                document.getElementById('arch-desc').innerText = data.desc;
                
                list.innerHTML = '';
                list.classList.remove('hidden');
                data.list.forEach(item => {
                    const li = document.createElement('li');
                    li.className = "animate-fade-in";
                    li.innerText = item;
                    list.appendChild(li);
                });
                
                panel.classList.remove('opacity-50');
            }, 150);
        }

        // Initialize Phase 1 on load
        setPhase(1);

    </script>
</body>
</html>